<head>
  <title>JustArrived | CrowdCompass</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
</head>

<body>
  
</body>

<template name="layout">
  <div class='header'>
    <div class="wrapper">
      <h1>JustArrived</h1>
    </div>
  </div>
  
  <div class='content'>
    {{ yield }}
  </div>

</template>

<template name="main">
  {{#if showAdmin}}
    {{> admin}}
  {{else}}
    {{> registration}}
  {{/if}}

  <div>
    <div class="wrapper">
      {{> footer}}
    </div>
  </div>
</template>

<template name = "registration">
  <div class="wrapper registration">
  {{#if registrationSubmitted }}
    <h2>Thanks for announcing your arrival!</h2>
  {{else }}
    <p>Share your arrival with others and stay connected after the event.</p>
    <form>
      {{#if showBadEmail}}
        {{> badEmail}}
      {{/if}}
      <label>Name</label><input id="name" placeholder="Arthur Digby Sellers" type="text">
      <label>Company</label><input id="company" placeholder="Sentinel Productions, Inc." type="text">
      <label>Email</label><input id="email" placeholder="ad.sellers@sentinelprod.com" type="email">
      <label>Twitter</label><input id="twitter" placeholder="@DigbySellers" type="text">
      <button>Announce Your Arrival!</button>
  {{/if}}
 		</form>
    {{> attendeeCount}}
  </div>
  <div class="wrapper attendee-list">
    <h2>Registered Attendees</h2>
    <table class="table">
      <thead>
        <tr>
        	<th>Attendee</th>
          <th>Company</th>
        	<th>Email</th>
          <th>Twitter</th>
          <!-- <th>Referrer</th> -->
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
      {{#each attendees}}
        <tr>
        		<td>{{ this.name }}</td>
            <td>{{ this.company }}</td>
        		<td>{{ this.email }}</td>
            <td>{{ this.twitter_id }}</td>
            <!-- <td>{{ this.referrer }}</td> -->
            <td>{{ timeAgo this.timestamp }} ago</td>
        </tr>
      {{/each }}
    </tbody>
    </table>
    <!-- Mobile display of attendees -->
    <ul class="mobile">
      {{#each attendees}}
      <li>
        <span>{{ this.name }}</span> <span class="timeAgo">{{ timeAgo this.timestamp }} ago</span><br/>
        {{ this.company }}<br/>
        {{ this.email }}<br/>
        {{ this.twitter_id }}<br/>
      </li>
      {{/each}}
    </ul>
  </div>
</template>

<template name = "footer">
  <div class='footer'>
    <a href = "http://crowdcompass.com">CrowdCompass | An Essential Part of Your Next Event</a>
    
    <div class="admin-footer">
      {{#if isAdmin}}
      <a href = "#" class = "admin">toggle admin</a> | 
      {{/if}}
      {{loginButtons}}
    </div>
  </div>
</template>

<template name = "admin">
  <div class="wrapper attendee-list">
    <h2>Registered Attendees</h2>
    <table>
      <thead>
        <tr>
        	<th>Attendee</th>
          <th>Company</th>
        	<th>Email</th>
          <th>Twitter</th>
          <!-- <th>Referrer</th> -->
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
      {{#each attendees}}
        <tr>
        		<td>{{ this.name }}</td>
            <td>{{ this.company }}</td>
        		<td>{{ this.email }}</td>
            <td>{{ this.twitter_id }}</td>
            <!-- <td>{{ this.referrer }}</td> -->
            <td>{{ timeAgo this.timestamp }} ago</td>
        </tr>
      {{/each }}
    </tbody>
    </table>
    <!-- Mobile display of attendees -->
    <ul class="mobile">
      {{#each attendees}}
      <li>
        <span>{{ this.name }}</span> <span class="timeAgo">{{ timeAgo this.timestamp }} ago</span><br/>
        {{ this.company }}<br/>
        {{ this.email }}<br/>
        {{ this.twitter_id }}<br/>
      </li>
      {{/each}}
    </ul>
  </div>
</template>

<template name="badEmail">
  <div class="error">
    <p>That's not a real email address...</p>
  </div>
</template>

<template name = "wall">
  <div class="wrapper attendee-list">
    <h2>Wall Attendees</h2>
    <table>
      <tbody>
      {{#each attendees}}
        <tr>
            <td>{{ this.name }}</td>
            <td>{{ this.company }}</td>
            <td>{{ this.twitter_id }}</td>
            <td>{{ timeAgo this.timestamp }} ago</td>
        </tr>
      {{/each }}
    </tbody>
    </table>
  </div>
</template>

<template name="attendeeCount">
  <p><strong>{{n}}</strong> attendees are here</p>
</template>


